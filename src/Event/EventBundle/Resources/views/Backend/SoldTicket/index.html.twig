{% extends 'EventEventBundle:Backend:layout.html.twig' %}

{% block content %}
<section>
    <div class="page-header">
        <h3>{{ 'Sold Tickets'|trans }}</h3>
    </div>

    <table class="table table-striped table-bordered" id="sold_tickets">
        <thead>
            <tr>
                <th>id</th>
                <th>{{ 'Ticket'|trans }}</th>
                <th>{{ 'Fullname'|trans }}</th>
                <th>{{ 'Email'|trans }}</th>
                <th>{{ 'Discount'|trans }}</th>
            </tr>
        </thead>
        <tbody>
        {% for sold_ticket in sold_tickets %}
            <tr>
                <td>{{ sold_ticket.id }}</td>
                <td>{{ sold_ticket.ticket.name }}</td>
                <td>
                    {{ sold_ticket.firstName ~ sold_ticket.lastName }}
                </td>
                <td>{{ sold_ticket.email }}</td>
                <td>{{ sold_ticket.discountString }}</td>
            </tr>
        {% else %}
            <tr>
                <td colspan="6">{{ 'No tickets sold'|trans }}.</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</section>
{% endblock %}

{% block javascripts %}
    {{ parent() }}

    <script type="text/javascript">
        $(document).ready(function() {
            var elementsCount = '{{ sold_tickets|length }}';

            if ( 0 < elementsCount) {
                $('#sold_tickets').dataTable({
                    "iDisplayLength": 50,
                    "sDom": "<'row'<'span7'l><'span2'f>r>t<'row'<'span3'i><'span6'p>>",
                    "sPaginationType": "bootstrap",
                    "oLanguage": {
                        "sLengthMenu": "_MENU_ records per page"
                    },
                    "aoColumns": [
                        null,
                        null,
                        null,
                        null,
                        null,
                    ],
                    "aaSorting": [[0, 'desc']]
                });
            }
        });
    </script>
{% endblock %}
